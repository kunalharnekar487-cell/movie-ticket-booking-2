<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard | MovieXpress</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="dark">

  <!-- Header -->
  <header class="header">
    <div class="container" style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 1rem;">
      <a href="index.html" class="logo">MovieXpress Admin</a>
      
      <nav class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="now showing.html" class="nav-link">Now Showing</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="contact.html" class="nav-link">Contact</a>
        <a href="admin.html" class="nav-link active">Admin</a>
        <a href="login.html" class="nav-link">Logout</a>
      </nav>
      
      <div style="display: flex; align-items: center; gap: 1rem;">
        <span style="color: var(--accent-gold); font-size: 0.9rem; font-weight: 600;">üîê Admin Panel</span>
        <button id="theme-toggle" class="theme-toggle">
          <span>üåô</span> Dark
        </button>
        <button class="mobile-menu-btn">‚ò∞</button>
      </div>
    </div>
  </header>

  <!-- Dashboard -->
  <section class="container" style="padding: 2rem 1rem;">
    <div class="text-center mb-8">
      <h1 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem; color: var(--primary-red);">Admin Dashboard</h1>
      <p style="color: var(--text-secondary);">Manage movies, bookings, and system overview</p>
    </div>

    <div id="dashboard-stats" class="dashboard-grid" style="margin-bottom: 3rem;">
      <!-- Stats will be populated by JavaScript -->
    </div>

    <!-- Movie Management -->
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
      <div>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
          <h2 style="font-size: 1.8rem; font-weight: 700; color: var(--primary-red);">Manage Movies</h2>
          <button onclick="toggleAddMovie()" class="btn btn-primary">
            <span>‚ûï</span> Add Movie
          </button>
        </div>
        
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Movie</th>
                <th>Genre</th>
                <th>Price</th>
                <th>Showtimes</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="movies-table">
              <!-- Movies will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div>
        <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--primary-red);">Quick Actions</h2>
        
        <div class="form-container" style="margin-bottom: 2rem;">
          <h3 style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem;">System Overview</h3>
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            <button class="btn btn-secondary" onclick="exportData()">
              <span>üìä</span> Export Data
            </button>
            <button class="btn btn-warning" onclick="clearBookings()">
              <span>üóëÔ∏è</span> Clear All Bookings
            </button>
            <button class="btn btn-success" onclick="refreshStats()">
              <span>üîÑ</span> Refresh Stats
            </button>
          </div>
        </div>
        
        <div class="form-container">
          <h3 style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem;">Recent Activity</h3>
          <div id="recent-activity" style="font-size: 0.9rem; color: var(--text-secondary);">
            <p>‚Ä¢ New booking: The Dark Knight</p>
            <p>‚Ä¢ User registered: john@example.com</p>
            <p>‚Ä¢ Movie added: Spider-Man</p>
          </div>
        </div>
      </div>
    </div>

  </section>

  <!-- Add Movie Modal -->
  <div id="add-movie-modal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <button class="modal-close" onclick="toggleAddMovie()">&times;</button>
      <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 2rem; color: var(--primary-red);">Add New Movie</h3>
      
      <form id="add-movie-form">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div class="form-group">
            <label class="form-label">Movie Title</label>
            <input type="text" id="movie-title" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Genre</label>
            <input type="text" id="movie-genre" class="form-input" required>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div class="form-group">
            <label class="form-label">Duration</label>
            <input type="text" id="movie-duration" placeholder="e.g., 2h 30m" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Price (‚Çπ)</label>
            <input type="number" id="movie-price" class="form-input" required>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Image URL</label>
          <input type="url" id="movie-image" class="form-input" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Showtimes (comma separated)</label>
          <input type="text" id="movie-showtimes" placeholder="e.g., 10:00 AM, 2:00 PM, 6:00 PM" class="form-input" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea id="movie-description" class="form-input" rows="3" required></textarea>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
          <button type="button" onclick="toggleAddMovie()" class="btn btn-secondary" style="flex: 1;">Cancel</button>
          <button type="submit" class="btn btn-success" style="flex: 1;">
            <span>‚úÖ</span> Add Movie
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container text-center">
      <p>&copy; 2025 MovieXpress Admin Panel | Built with ‚ù§Ô∏è for movie lovers</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="main.js"></script>
  <script>
    // Admin-specific functionality
    function toggleAddMovie() {
      const modal = document.getElementById("add-movie-modal");
      modal.classList.toggle("active");
    }
    
    function renderMoviesTable() {
      const tbody = document.getElementById("movies-table");
      if (!tbody) return;
      
      tbody.innerHTML = MovieXpress.movies.map(movie => `
        <tr>
          <td>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <img src="${movie.image}" alt="${movie.title}" style="width: 50px; height: 70px; object-fit: cover; border-radius: 0.25rem;">
              <div>
                <strong>${movie.title}</strong><br>
                <small style="color: var(--text-secondary);">‚≠ê ${movie.rating}</small>
              </div>
            </div>
          </td>
          <td>${movie.genre}</td>
          <td>‚Çπ${movie.price}</td>
          <td><small>${movie.showtimes.join(', ')}</small></td>
          <td>
            <button class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; margin-right: 0.5rem;" onclick="editMovie(${movie.id})">
              ‚úèÔ∏è Edit
            </button>
            <button class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: var(--primary-red);" onclick="deleteMovie(${movie.id})">
              üóëÔ∏è Delete
            </button>
          </td>
        </tr>
      `).join('');
    }
    
    function editMovie(id) {
      MovieXpress.showNotification('Edit functionality coming soon!', 'info');
    }
    
    function deleteMovie(id) {
      if (confirm('Are you sure you want to delete this movie?')) {
        MovieXpress.movies = MovieXpress.movies.filter(m => m.id !== id);
        renderMoviesTable();
        MovieXpress.renderDashboardStats();
        MovieXpress.showNotification('Movie deleted successfully', 'success');
      }
    }
    
    function exportData() {
      const data = {
        movies: MovieXpress.movies,
        bookings: MovieXpress.bookings,
        exportDate: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'moviexpress-data.json';
      a.click();
      
      MovieXpress.showNotification('Data exported successfully', 'success');
    }
    
    function clearBookings() {
      if (confirm('Are you sure you want to clear all bookings? This action cannot be undone.')) {
        MovieXpress.bookings = [];
        localStorage.setItem('moviexpress_bookings', JSON.stringify([]));
        MovieXpress.renderDashboardStats();
        MovieXpress.showNotification('All bookings cleared', 'success');
      }
    }
    
    function refreshStats() {
      MovieXpress.renderDashboardStats();
      renderMoviesTable();
      MovieXpress.showNotification('Stats refreshed', 'success');
    }
    
    // Handle add movie form
    document.getElementById('add-movie-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const newMovie = {
        id: Date.now(),
        title: document.getElementById('movie-title').value,
        genre: document.getElementById('movie-genre').value,
        duration: document.getElementById('movie-duration').value,
        price: parseInt(document.getElementById('movie-price').value),
        image: document.getElementById('movie-image').value,
        showtimes: document.getElementById('movie-showtimes').value.split(',').map(s => s.trim()),
        description: document.getElementById('movie-description').value,
        rating: (Math.random() * 2 + 7).toFixed(1), // Random rating between 7-9
        language: 'English, Hindi'
      };
      
      MovieXpress.movies.push(newMovie);
      renderMoviesTable();
      MovieXpress.renderDashboardStats();
      toggleAddMovie();
      this.reset();
      
      MovieXpress.showNotification('Movie added successfully!', 'success');
    });
    
    // Initialize admin dashboard
    document.addEventListener('DOMContentLoaded', function() {
      renderMoviesTable();
    });
    
    // Responsive design
    function checkScreenSize() {
      const container = document.querySelector('section > div:last-child');
      if (window.innerWidth <= 768) {
        container.style.gridTemplateColumns = '1fr';
        container.style.gap = '2rem';
      } else {
        container.style.gridTemplateColumns = '2fr 1fr';
        container.style.gap = '3rem';
      }
    }
    
    window.addEventListener('resize', checkScreenSize);
    checkScreenSize();
  </script>
  
  <style>
    @media (max-width: 768px) {
      section > div:last-child {
        grid-template-columns: 1fr !important;
        gap: 2rem !important;
      }
      
      .table {
        font-size: 0.8rem;
      }
      
      .table td, .table th {
        padding: 0.5rem;
      }
    }
  </style>
</body>
</html>
