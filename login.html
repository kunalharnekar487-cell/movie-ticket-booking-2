<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login | MovieXpress</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="dark" style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: linear-gradient(135deg, var(--dark-bg) 0%, #1e293b 100%);">

  <!-- Back to Home -->
  <div style="position: absolute; top: 2rem; left: 2rem;">
    <a href="index.html" class="btn btn-secondary">
      <span>üè†</span> Back to Home
    </a>
  </div>
  
  <div class="form-container" style="width: 100%; max-width: 450px; position: relative;">
    <div class="text-center mb-6">
      <a href="index.html" class="logo" style="font-size: 2rem; text-decoration: none;">MovieXpress</a>
      <h2 id="form-title" style="font-size: 1.8rem; font-weight: 700; margin-top: 1rem; color: var(--primary-red);">Welcome Back</h2>
      <p style="color: var(--text-secondary); margin-top: 0.5rem;">Sign in to your account</p>
    </div>
    
    <form id="auth-form">
      <!-- Username -->
      <div id="username-field" class="form-group">
        <label class="form-label">Username</label>
        <input type="text" required id="username" name="username" class="form-input" placeholder="Enter your username" />
      </div>
      
      <!-- Email (Signup only) -->
      <div id="email-field" class="form-group hidden">
        <label class="form-label">Email</label>
        <input type="email" id="email" name="email" class="form-input" placeholder="Enter your email" />
      </div>
      
      <!-- Password -->
      <div class="form-group">
        <label class="form-label">Password</label>
        <input type="password" required id="password" name="password" class="form-input" placeholder="Enter your password" />
      </div>

      <!-- Confirm Password (Signup only) -->
      <div id="confirm-password-field" class="form-group hidden">
        <label class="form-label">Confirm Password</label>
        <input type="password" id="confirm-password" name="confirm-password" class="form-input" placeholder="Confirm your password" />
      </div>

      <!-- OTP Section (Signup only) -->
      <div id="otp-section" class="form-group hidden">
        <label class="form-label">Enter OTP</label>
        <div style="display: flex; gap: 0.5rem;">
          <input type="text" id="otp-input" maxlength="4" placeholder="4-digit OTP" class="form-input" style="flex: 1;" />
          <button type="button" onclick="generateOTP()" class="btn btn-secondary" style="white-space: nowrap;">Get OTP</button>
        </div>
        <p id="otp-msg" style="font-size: 0.9rem; color: var(--success-green); margin-top: 0.5rem;" class="hidden"></p>
      </div>

      <!-- Submit Button -->
      <button type="submit" id="submit-btn" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">
        <span>üîê</span> Sign In
      </button>
    </form>

    <!-- Toggle -->
    <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(239, 68, 68, 0.2);">
      <p style="color: var(--text-secondary); margin-bottom: 1rem;">
        <span id="toggle-text">Don't have an account?</span>
      </p>
      <button onclick="toggleForm()" class="btn btn-secondary" style="width: 100%;">
        <span id="toggle-btn-text">Create Account</span>
      </button>
    </div>
    
    <!-- Demo Info -->
    <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 0.5rem; margin-top: 2rem; text-align: center;">
      <p style="font-size: 0.9rem; color: var(--text-secondary);">üí° Demo: Use any username/password to login</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="main.js"></script>
  <script>
    let isLogin = true;
    let generatedOTP = null;

    const title = document.getElementById("form-title");
    const formButton = document.getElementById("submit-btn");
    const toggleText = document.getElementById("toggle-text");
    const toggleBtnText = document.getElementById("toggle-btn-text");
    const confirmPasswordField = document.getElementById("confirm-password-field");
    const emailField = document.getElementById("email-field");
    const otpSection = document.getElementById("otp-section");
    const otpMsg = document.getElementById("otp-msg");

    // Toggle between login and signup
    function toggleForm() {
      isLogin = !isLogin;
      
      if (isLogin) {
        title.innerHTML = "Welcome Back";
        formButton.innerHTML = '<span>üîê</span> Sign In';
        toggleText.innerText = "Don't have an account?";
        toggleBtnText.innerText = "Create Account";
      } else {
        title.innerHTML = "Create Account";
        formButton.innerHTML = '<span>üé¨</span> Join MovieXpress';
        toggleText.innerText = "Already have an account?";
        toggleBtnText.innerText = "Sign In Instead";
      }
      
      confirmPasswordField.classList.toggle("hidden", isLogin);
      emailField.classList.toggle("hidden", isLogin);
      otpSection.classList.toggle("hidden", isLogin);
      
      // Reset OTP when switching
      if (isLogin) {
        otpMsg.classList.add("hidden");
        generatedOTP = null;
      }
    }

    // Generate random OTP
    function generateOTP() {
      generatedOTP = Math.floor(1000 + Math.random() * 9000);
      otpMsg.innerHTML = `‚úÖ Your OTP is: <strong>${generatedOTP}</strong> (Demo)`;
      otpMsg.classList.remove("hidden");
      
      // Auto-fill OTP for demo
      setTimeout(() => {
        document.getElementById("otp-input").value = generatedOTP;
      }, 500);
    }
  </script>

</body>
</html>
